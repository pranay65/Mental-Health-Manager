<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stress Detector</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="flex flex-col min-h-screen bg-gray-100 text-gray-800">
    <header
      class="bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg"
    >
      <div class="container mx-auto px-6 py-4">
        <div class="flex justify-between items-center">
          <h1 class="text-3xl font-bold tracking-tight">
            Mental Health Manager
          </h1>
          <nav>
            <ul class="flex space-x-6">
              <li>
                <a
                  href="{{ url_for('analyze_text') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Analyze Text</a
                >
              </li>
              <li>
                <a
                  href="{{ url_for('historical_analysis') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >History</a
                >
              </li>
              <li>
                <a
                  href="{{ url_for('community') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Community</a
                >
              </li>
              <li>
                <a
                  href="{{ url_for('resources') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Resources</a
                >
              </li>
              {% if 'username' in session %}
              <li>
                <a
                  href="{{ url_for('logout') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Logout ({{ session['username'] }})</a
                >
              </li>
              {% else %}
              <li>
                <a
                  href="{{ url_for('login') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Login</a
                >
              </li>
              <li>
                <a
                  href="{{ url_for('register') }}"
                  class="transition-all ease-in-out duration-300 hover:text-blue-200"
                  >Register</a
                >
              </li>
              {% endif %}
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <main class="flex-grow container mx-auto px-6 py-12">
      <section class="text-center mb-16">
        <h2 class="text-4xl font-bold mb-4">
          Welcome to Mental Health Manager
        </h2>
        <p class="text-xl text-gray-700 mb-8">
          Your personal tool to monitor and improve your mental well-being.
          Analyze your stress levels, track your progress, and connect with a
          supportive community.
        </p>
      </section>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div
          class="bg-white p-8 rounded-lg shadow-lg transition-all ease-in-out duration-300 transform hover:-translate-y-2 hover:shadow-2xl"
        >
          <h3 class="text-2xl font-semibold mb-4 text-blue-600">
            <a
              href="{{ url_for('analyze_text') }}"
              class="transition-all ease-in-out duration-300 hover:text-blue-800"
              >Analyze Text</a
            >
          </h3>
          <p class="text-gray-700 mb-4">
            Input your text to check for signs of stress and emotional patterns.
          </p>
          <a
            href="{{ url_for('analyze_text') }}"
            class="transition-all ease-in-out duration-300 text-blue-600 hover:underline"
            >Try it now →</a
          >
        </div>
        <div
          class="bg-white p-8 rounded-lg shadow-lg transition-all ease-in-out duration-300 transform hover:-translate-y-2 hover:shadow-2xl"
        >
          <h3 class="text-2xl font-semibold mb-4 text-purple-600">
            <a
              href="{{ url_for('historical_analysis') }}"
              class="transition-all ease-in-out duration-300 hover:text-purple-800"
              >Historical Analysis</a
            >
          </h3>
          <p class="text-gray-700 mb-4">
            Look at your previous texts and see how you've changed over time.
          </p>
          <a
            href="{{ url_for('historical_analysis') }}"
            class="transition-all ease-in-out duration-300 text-purple-600 hover:underline"
            >View history →</a
          >
        </div>
        <div
          class="bg-white p-8 rounded-lg shadow-lg transition-all ease-in-out duration-300 transform hover:-translate-y-2 hover:shadow-2xl"
        >
          <h3 class="text-2xl font-semibold mb-4 text-green-600">
            <a
              href="{{ url_for('community') }}"
              class="transition-all ease-in-out duration-300 hover:text-green-800"
              >Community</a
            >
          </h3>
          <p class="text-gray-700 mb-4">
            Share your experiences and get support from a caring community.
          </p>
          <a
            href="{{ url_for('community') }}"
            class="transition-all ease-in-out duration-300 text-green-600 hover:underline"
            >Join now →</a
          >
        </div>
        <div
          class="bg-white p-8 rounded-lg shadow-lg transition-all ease-in-out duration-300 transform hover:-translate-y-2 hover:shadow-2xl"
        >
          <h3 class="text-2xl font-semibold mb-4 text-orange-600">
            <a
              href="{{ url_for('resources') }}"
              class="transition-all ease-in-out duration-300 hover:text-orange-800"
              >Resources</a
            >
          </h3>
          <p class="text-gray-700 mb-4">
            Access mental health professionals, hotlines, and self-help tools.
          </p>
          <a
            href="{{ url_for('resources') }}"
            class="transition-all ease-in-out duration-300 text-orange-600 hover:underline"
            >Explore resources →</a
          >
        </div>
      </div>
    </main>

    <footer
      class="mt-auto bg-gradient-to-r from-gray-800 to-gray-700 text-white py-4"
    >
      <div class="container mx-auto px-6 text-center">
        <p class="text-lg">
          Created for Summer Internship Project - AIML-A - Batch 6
        </p>
      </div>
      <div class="fixed bottom-8 right-8 z-50">
        <button
          id="chatbotButton"
          class="bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all transform hover:scale-110"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-8 w-8"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"
            />
          </svg>
        </button>
        <div
          id="chatbotWindow"
          class="hidden fixed bottom-20 right-8 w-96 bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl shadow-2xl flex flex-col border border-gray-700"
          style="max-height: 70vh; bottom: 100px"
        >
          <div
            class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-t-xl flex justify-between items-center"
          >
            <h3 class="text-lg font-semibold">Mental Health Assistant</h3>
            <button
              id="closeChat"
              class="hover:text-indigo-300 text-xl transition-colors"
            >
              ×
            </button>
          </div>
          <div
            id="chatMessages"
            class="flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4"
            style="height: calc(70vh - 130px)"
          >
            <div
              class="chat-message bot bg-gray-700 bg-opacity-50 p-3 rounded-lg backdrop-blur-sm border border-gray-600"
            >
              <div class="text-purple-400 text-sm font-medium">Assistant</div>
              <p class="text-gray-200 mt-1">
                Hello! I'm here to help with mental health support. How can I
                assist you today?
              </p>
            </div>
          </div>
          <div
            class="p-4 border-t border-gray-700 bg-gray-800 bg-opacity-50 backdrop-blur-sm"
          >
            <div class="flex space-x-2">
              <input
                type="text"
                id="userInput"
                class="flex-1 bg-gray-700 border border-gray-600 text-gray-200 rounded-lg p-3 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/30 transition-all"
                placeholder="Type your message..."
              />
              <button
                id="sendMessage"
                class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-5 py-3 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
      <style>
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: linear-gradient(to bottom, #6366f1, #8b5cf6);
          border-radius: 4px;
        }
        .chat-message.user {
          background: linear-gradient(
            135deg,
            rgba(79, 70, 229, 0.15),
            rgba(124, 58, 237, 0.15)
          );
          border: 1px solid rgba(99, 102, 241, 0.3);
          margin-left: 20%;
        }
        .chat-message.bot {
          background: linear-gradient(
            135deg,
            rgba(55, 65, 81, 0.15),
            rgba(31, 41, 55, 0.15)
          );
          border: 1px solid rgba(107, 114, 128, 0.3);
          margin-right: 20%;
        }
      </style>
      <script>
        const chatbotButton = document.getElementById("chatbotButton"),
          chatbotWindow = document.getElementById("chatbotWindow"),
          closeChat = document.getElementById("closeChat"),
          userInput = document.getElementById("userInput"),
          sendMessage = document.getElementById("sendMessage"),
          chatMessages = document.getElementById("chatMessages");
        chatbotButton.addEventListener("click", () => {
          chatbotWindow.classList.toggle("hidden");
        }),
          closeChat.addEventListener("click", () => {
            chatbotWindow.classList.add("hidden");
          });
        function addMessage(e, t) {
          const l = document.createElement("div");
          (l.className = `chat-message ${
            t ? "user" : "bot"
          } p-3 rounded-lg backdrop-blur-sm mb-4`),
            (l.innerHTML = `
            <div class="${
              t ? "text-indigo-400" : "text-purple-400"
            } text-sm font-medium">${t ? "You" : "Assistant"}</div>
            <p class="text-gray-200 mt-1">${e}</p>`),
            chatMessages.appendChild(l),
            (chatMessages.scrollTop = chatMessages.scrollHeight);
        }
        async function handleUserMessage() {
          const e = userInput.value.trim();
          if (!e) return;
          addMessage(e, !0), (userInput.value = "");
          try {
            const t = await fetch("/chatbot", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: e }),
              }),
              l = await t.json();
            addMessage(l.response, !1);
          } catch (e) {
            console.error("Error:", e),
              addMessage(
                "Sorry, I'm having trouble connecting. Please try again later.",
                !1
              );
          }
        }
        sendMessage.addEventListener("click", handleUserMessage),
          userInput.addEventListener("keypress", (e) => {
            "Enter" === e.key && handleUserMessage();
          });
      </script>
    </footer>
  </body>
</html>
